# ═══════════════════════════════════════════════════════════════
# COMPANION — Cloudflare Worker Configuration
#
# This configures the API proxy that sits between your
# containers and the Anthropic API.
#
# Deploy:   npx wrangler deploy
# Dev:      npx wrangler dev
# Secrets:  npx wrangler secret put ANTHROPIC_API_KEY
# ═══════════════════════════════════════════════════════════════

name = "companion"
main = "worker.js"
compatibility_date = "2024-01-01"

# Environment variables (non-secret)
# Set your allowed origins to the domains where your containers are hosted.
# Comma-separated. Example: "https://jethomasphd.github.io,https://companion.yourdomain.com"
[vars]
ALLOWED_ORIGINS = "https://jethomasphd.github.io,https://the-companion-dossier.pages.dev"

# ── KV Namespace for Take_Action letter submissions ──
# Create with:  npx wrangler kv namespace create SUBMISSIONS
# Then paste the ID below.
[[kv_namespaces]]
binding = "SUBMISSIONS"
id = "PASTE_YOUR_KV_NAMESPACE_ID_HERE"

# The ANTHROPIC_API_KEY is stored as a secret, NOT here.
# Set it with:  npx wrangler secret put ANTHROPIC_API_KEY
# The ADMIN_KEY protects the /admin dashboard.
# Set it with:  npx wrangler secret put ADMIN_KEY
