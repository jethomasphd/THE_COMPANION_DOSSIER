# ═══════════════════════════════════════════════════════════════
# COMPANION — Cloudflare Worker Configuration
#
# This configures the API proxy that sits between your
# containers and the Anthropic API.
#
# Deploy:   npx wrangler deploy
# Dev:      npx wrangler dev
# Secrets:  npx wrangler secret put ANTHROPIC_API_KEY
# ═══════════════════════════════════════════════════════════════

name = "companion"
main = "worker.js"
compatibility_date = "2024-01-01"

# Environment variables (non-secret)
# Set your allowed origins to the domains where your containers are hosted.
# Comma-separated. Example: "https://jethomasphd.github.io,https://companion.yourdomain.com"
[vars]
ALLOWED_ORIGINS = "https://jethomasphd.github.io,https://the-companion-dossier.pages.dev,https://www.the-companion-dossier.com,https://the-companion-dossier.com"

# ── KV Namespace for Take_Action letter submissions ──
# Create with:  npx wrangler kv namespace create SUBMISSIONS
# Then paste the ID below.
[[kv_namespaces]]
binding = "SUBMISSIONS"
id = "df802c9fe1644b07b5b67d59c3c23daf"

# The ANTHROPIC_API_KEY is stored as a secret, NOT here.
# Set it with:  npx wrangler secret put ANTHROPIC_API_KEY
# The ADMIN_KEY protects the /admin dashboard.
# Set it with:  npx wrangler secret put ADMIN_KEY

# ── USAJobs API credentials ──
# Request an API key at: https://developer.usajobs.gov/APIRequest/Index
# The email must match the one used to request the key.
# Set with:  npx wrangler secret put USAJOBS_API_KEY
# Set with:  npx wrangler secret put USAJOBS_EMAIL
